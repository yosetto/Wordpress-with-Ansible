---
# tasks file for wordpress
- name: download and extract wordpress in apache2 public directory
  unarchive: 
   src: "https://wordpress.org/latest.tar.gz" 
   dest: "/var/www/html"
   remote_src: yes
  become: true
  
- name: remove default index file from /var/www/html/
  file:
    path: /var/www/html/index.html
    state: absent
  become: true

- name: move files to /var/www/html/
  command: cp -rf . "/var/www/html/"
  args:
    chdir: "/var/www/html/wordpress/"
  become: true
    
- name: change ownership of installation directory
  file:
    path: "/var/www/html"
    owner: www-data
    group: www-data
    state: directory
    recurse: yes
  become: true
  
- name: remove wordpress dir
  file:
    path: "/var/www/html/wordpress/"
    state: absent
  become: true
    
- name: copy wp-config.php file
  template:
    src: wp-config.php.j2
    dest: "/var/www/html/wp-config.php"
  become: true

